(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/takeLook/takeLook"],{496:function(e,t,n){"use strict";n.r(t);var r=n(497),i=n(499);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n(717);var s,u=n(21),a=Object(u["default"])(i["default"],r["render"],r["staticRenderFns"],!1,null,"f1076e78",null,!1,r["components"],s);a.options.__file="components/takeLook/takeLook.vue",t["default"]=a.exports},497:function(e,t,n){"use strict";n.r(t);var r=n(498);n.d(t,"render",(function(){return r["render"]})),n.d(t,"staticRenderFns",(function(){return r["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return r["recyclableRender"]})),n.d(t,"components",(function(){return r["components"]}))},498:function(e,t,n){"use strict";var r;n.r(t),n.d(t,"render",(function(){return i})),n.d(t,"staticRenderFns",(function(){return s})),n.d(t,"recyclableRender",(function(){return o})),n.d(t,"components",(function(){return r}));try{r={uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,407))},uLoadingIcon:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-loading-icon/u-loading-icon")]).then(n.bind(null,422))}}}catch(u){if(-1===u.message.indexOf("Cannot find module")||-1===u.message.indexOf(".vue"))throw u;console.error(u.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var e=this,t=e.$createElement,r=(e._self._c,0!==e.meetingList.length?n(184):null),i=0!==e.meetingList.length?n(185):null,o=0!==e.meetingList.length?n(186):null,s=0!==e.meetingList.length?n(187):null;e.$mp.data=Object.assign({},{$root:{m0:r,m1:i,m2:o,m3:s}})},o=!1,s=[];i._withStripped=!0},499:function(e,t,n){"use strict";n.r(t);var r=n(500),i=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t["default"]=i.a},500:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(10)),i=n(159),o=n(158);function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return f(e)||l(e)||c(e)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){if(e){if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function l(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function f(e){if(Array.isArray(e))return d(e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t,n,r,i,o,s){try{var u=e[o](s),a=u.value}catch(c){return void n(c)}u.done?t(a):Promise.resolve(a).then(r,i)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){g(o,r,i,s,u,"next",e)}function u(e){g(o,r,i,s,u,"throw",e)}s(void 0)}))}}var p={name:"takeLook",data:function(){return{limit:5,lastPage:"",meetingList:[],linsMeeting:[],isloading:!1,refresh:!0,fillerIdList:[]}},props:{filler:{type:String},type:{type:Number}},mounted:function(){this.fillerIdList=e.getStorageSync(this.filler)?e.getStorageSync(this.filler):[],this.getTakeLook()},onShow:function(){this.refresh=!0},methods:{getTakeLook:function(t){var n=this;return m(r.default.mark((function i(){var s,a,c,l,f,d;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!n.isloading){r.next=2;break}return r.abrupt("return");case 2:return!t&&n.fillerIdList.length||(n.meetingList=[]),n.isloading=!0,r.next=6,(0,o.takeLook)({limit:n.limit,fillerIdList:n.fillerIdList,meeting:n.type});case 6:if(s=r.sent,console.log("请求瞧一瞧列表"),console.log(s),0===s.code){r.next=13;break}return e.showToast({title:"获取瞧一瞧列表失败",icon:"none",duration:2e3}),n.isloading=!1,r.abrupt("return");case 13:n.linsMeeting=s.result,a=0;case 15:if(!(a<n.linsMeeting.length)){r.next=24;break}return n.fillerIdList.push(n.linsMeeting[a].id),r.next=19,n.getCommentList(n.linsMeeting[a].id);case 19:c=r.sent,n.$set(n.linsMeeting[a],"pinglun",c);case 21:a++,r.next=15;break;case 24:for(e.setStorageSync(n.filler,n.fillerIdList),n.meetingList=[].concat(u(n.meetingList),u(n.linsMeeting)),n.lastPage=s.result.last_page,l=0;l<n.meetingList.length;l++)f=n.meetingList[l].media[0],d=/(\.gif|\.jpeg|\.png|\.jpg|\.bmp)/,n.$set(n.meetingList[l],"img",d.test(f)),n.$set(n.meetingList[l],"more","");s.result.length||(e.removeStorageSync(n.filler),n.fillerIdList=[],n.getTakeLook()),n.$nextTick((function(){var t=e.createSelectorQuery().in(n);t.selectAll(".content-title").boundingClientRect(),t.selectAll(".inner").boundingClientRect(),t.exec((function(e){for(var t=0;t<e[0].length;t++){var r=e[0][t].height-e[1][t].height;r>=0?n.$set(n.meetingList[t],"more","2"):n.$set(n.meetingList[t],"more","1")}})),n.isloading=!1}));case 30:case"end":return r.stop()}}),i)})))()},getCommentList:function(e){return m(r.default.mark((function t(){var n;return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,i.getComment)({postId:e,page:1,limit:3});case 2:if(n=t.sent,0===n.code){t.next=5;break}return t.abrupt("return");case 5:return t.abrupt("return",n.result.data);case 6:case"end":return t.stop()}}),t)})))()},toArticleDes:function(t){this.refresh=!1,e.navigateTo({url:"../../pages_userActivity/articleDes/articleDes?i="+t.id})},previewImg:function(t,n){this.refresh=!1,e.previewImage({current:t[n],urls:t})},toOtherUser:function(t,n){t.uid===this.uid?e.switchTab({url:"../../pages/user/user"}):1===n?e.navigateTo({url:"../../pages_userActivity/otherUser/otherUser?ocateId="+t.cateId+"&ouid="+t.uid}):e.navigateTo({url:"../../pages_userActivity/otherUser/otherUser?ocateId="+t.cateid+"&ouid="+t.uid})}}};t.default=p}).call(this,n(1)["default"])},717:function(e,t,n){"use strict";n.r(t);var r=n(718),i=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t["default"]=i.a},718:function(e,t,n){}}]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/components/takeLook/takeLook.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/takeLook/takeLook-create-component',
    {
        'components/takeLook/takeLook-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('1')['createComponent'](__webpack_require__(496))
        })
    },
    [['components/takeLook/takeLook-create-component']]
]);
