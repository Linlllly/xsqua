{"version":3,"sources":["uni-app:///main.js","webpack:///F:/uniApp/xsqua/App.vue?71d8","webpack:///F:/uniApp/xsqua/pages_userActivity/artcleIssue/artcleIssue.vue?30de","webpack:///F:/uniApp/xsqua/pages_userActivity/artcleIssue/artcleIssue.vue?c39c","webpack:///F:/uniApp/xsqua/pages_userActivity/artcleIssue/artcleIssue.vue?3a31","webpack:///F:/uniApp/xsqua/pages_userActivity/artcleIssue/artcleIssue.vue?2831","uni-app:///pages_userActivity/artcleIssue/artcleIssue.vue","webpack:///F:/uniApp/xsqua/pages_userActivity/artcleIssue/artcleIssue.vue?a2fd","webpack:///F:/uniApp/xsqua/App.vue?99be","webpack:///F:/uniApp/xsqua/App.vue?88dd","uni-app:///App.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","Vue","use","uView","prototype","$store","store","config","productionTip","App","mpType","app","$mount","createPage","Page","renderjs","component","options","__file","components","uSticky","uIcon","uButton","uRadioGroup","uRadio","uUpload","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","m0","_self","_c","value","vtype","m1","m2","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","ws"],"mappings":"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","file":"pages_userActivity/artcleIssue/artcleIssue.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages_userActivity/artcleIssue/artcleIssue.vue'\ncreatePage(Page)","import mod from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./App.vue?vue&type=style&index=0&lang=scss&\"","import { render, staticRenderFns, recyclableRender, components } from \"./artcleIssue.vue?vue&type=template&id=bf1412f6&\"\nvar renderjs\nimport script from \"./artcleIssue.vue?vue&type=script&lang=js&\"\nexport * from \"./artcleIssue.vue?vue&type=script&lang=js&\"\nimport style0 from \"./artcleIssue.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages_userActivity/artcleIssue/artcleIssue.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./artcleIssue.vue?vue&type=template&id=bf1412f6&\"","var components\ntry {\n  components = {\n    uSticky: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-sticky/u-sticky\" */ \"@/uni_modules/uview-ui/components/u-sticky/u-sticky.vue\"\n      )\n    },\n    uIcon: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uButton: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-button/u-button\" */ \"@/uni_modules/uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n    uRadioGroup: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-radio-group/u-radio-group\" */ \"@/uni_modules/uview-ui/components/u-radio-group/u-radio-group.vue\"\n      )\n    },\n    uRadio: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-radio/u-radio\" */ \"@/uni_modules/uview-ui/components/u-radio/u-radio.vue\"\n      )\n    },\n    \"u-Textarea\": function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u--textarea/u--textarea\" */ \"@/uni_modules/uview-ui/components/u--textarea/u--textarea.vue\"\n      )\n    },\n    uUpload: function() {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-upload/u-upload\" */ \"@/uni_modules/uview-ui/components/u-upload/u-upload.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var m0 =\n    _vm.value === 2 && _vm.vtype === 1\n      ? require(\"../../static/video-img.jpg\")\n      : null\n  var m1 =\n    _vm.value === 2 && _vm.vtype === 2\n      ? require(\"../ua_static/up-video.png\")\n      : null\n  var m2 =\n    _vm.value === 2 && _vm.vtype === 3\n      ? require(\"../ua_static/up-video-ok.png\")\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        m0: m0,\n        m1: m1,\n        m2: m2\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./artcleIssue.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./artcleIssue.vue?vue&type=script&lang=js&\"","<template>\r\n\t<div class=\"pages\">\r\n\t\t<!-- 粘性定位 -->\r\n\t\t<u-sticky>\r\n\t\t\t<div class=\"issue-top\">\r\n\t\t\t\t<u-icon name=\"close\" color=\"#333\" size=\"24\" @click=\"backTo\"></u-icon>\r\n\t\t\t\t<div class=\"send\" @click=\"sendArticle\"><u-button type=\"warning\" :text=\"secret ? '存档' : '发布'\"></u-button></div>\r\n\t\t\t</div>\r\n\t\t</u-sticky>\r\n\t\t<!-- 选择上传 -->\r\n\t\t<u-radio-group v-model=\"value\" activeColor=\"#f9ae3d\">\r\n\t\t\t<u-radio :name=\"1\" shape=\"circle\" :label=\"secret ? '图文' : '发布图文'\"></u-radio>\r\n\t\t\t<u-radio :name=\"2\" shape=\"circle\" :label=\"secret ? '视频' : '发布视频'\"></u-radio>\r\n\t\t</u-radio-group>\r\n\r\n\t\t<!-- 上传组件 -->\r\n\t\t<div class=\"uploads\">\r\n\t\t\t<!-- 文本 -->\r\n\t\t\t<u--textarea\r\n\t\t\t\tv-if=\"value === 1\"\r\n\t\t\t\tv-model=\"content\"\r\n\t\t\t\t:placeholder=\"secret ? '字数无限制' : '发布你的新鲜事吧!'\"\r\n\t\t\t\tautoHeight\r\n\t\t\t\tborder=\"none\"\r\n\t\t\t\t:show-confirm-bar=\"false\"\r\n\t\t\t\tmaxlength=\"-1\"\r\n\t\t\t></u--textarea>\r\n\r\n\t\t\t<!-- 上传图片 -->\r\n\t\t\t<u-upload\r\n\t\t\t\tv-if=\"value === 1\"\r\n\t\t\t\t:fileList=\"fileList1\"\r\n\t\t\t\t@afterRead=\"afterRead\"\r\n\t\t\t\t@delete=\"deletePic\"\r\n\t\t\t\tname=\"1\"\r\n\t\t\t\tmultiple\r\n\t\t\t\t:maxCount=\"9\"\r\n\t\t\t\t:previewFullImage=\"false\"\r\n\t\t\t\twidth=\"160rpx\"\r\n\t\t\t\theight=\"160rpx\"\r\n\t\t\t></u-upload>\r\n\r\n\t\t\t<!-- 文本 -->\r\n\t\t\t<u--textarea\r\n\t\t\t\tv-if=\"value === 2\"\r\n\t\t\t\tv-model=\"content2\"\r\n\t\t\t\tplaceholder=\"建议上传视频时长60s\"\r\n\t\t\t\tautoHeight\r\n\t\t\t\tborder=\"none\"\r\n\t\t\t\t:show-confirm-bar=\"false\"\r\n\t\t\t\tmaxlength=\"-1\"\r\n\t\t\t></u--textarea>\r\n\t\t\t<!-- 上传视频 -->\r\n\t\t\t<div class=\"v-box\" v-if=\"value === 2\">\r\n\t\t\t\t<img v-if=\"vtype === 1\" src=\"../../static/video-img.jpg\" mode=\"\" @click=\"selectVideo\" />\r\n\t\t\t\t<img v-if=\"vtype === 2\" src=\"../ua_static/up-video.png\" />\r\n\t\t\t\t<img v-if=\"vtype === 3\" :src=\"videoImg\" />\r\n\t\t\t\t<img v-if=\"vtype === 3\" src=\"../ua_static/up-video-ok.png\" />\r\n\t\t\t\t<div v-if=\"vtype === 3\" @click=\"removeVideo\"></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { onLoad } from '../../uni_modules/uview-ui/libs/mixin/mixin';\r\nimport { ip } from '@/api/api.js';\r\nimport { addPost, checkContent, addXFilePost } from '@/api/articleIssue/artcleIssue.js';\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\t//文本\r\n\t\t\tcontent: '',\r\n\t\t\tcontent2: '',\r\n\t\t\t//图片\r\n\t\t\tfileList1: [],\r\n\t\t\t//视频\r\n\t\t\tfileList2: [],\r\n\t\t\t//视频封面\r\n\t\t\tvideoImg: '',\r\n\t\t\t//显示视频上传状态\r\n\t\t\tvtype: 1,\r\n\t\t\t//单选\r\n\t\t\tvalue: 1,\r\n\t\t\t//发布到空间会议室？\r\n\t\t\tmeeting: '',\r\n\t\t\t//是否私人\r\n\t\t\tsecret: null,\r\n\t\t\tmediaImgList: [],\r\n\t\t\tmediaVideoList: [],\r\n\t\t\tupMediaOrImg: false,\r\n\t\t\ttimer: null\r\n\t\t};\r\n\t},\r\n\tonLoad(option) {\r\n\t\tthis.secret = option.secret ? option.secret : null;\r\n\t\tthis.meeting = option.meeting ? option.meeting : '';\r\n\t\tif (!this.secret) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '请遵守法律法规，文明发言',\r\n\t\t\t\ticon: 'none',\r\n\t\t\t\tduration: 2000\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t// 删除图片\r\n\t\tdeletePic(event) {\r\n\t\t\tthis[`fileList${event.name}`].splice(event.index, 1);\r\n\t\t},\r\n\t\t// 新增图片\r\n\t\tasync afterRead(event) {\r\n\t\t\tlet lists = [].concat(event.file);\r\n\t\t\tlet fileListLen = this[`fileList${event.name}`].length;\r\n\t\t\tlists.map(item => {\r\n\t\t\t\tthis[`fileList${event.name}`].push({\r\n\t\t\t\t\t...item,\r\n\t\t\t\t\tstatus: 'uploading',\r\n\t\t\t\t\tmessage: '上传中'\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tfor (let i = 0; i < lists.length; i++) {\r\n\t\t\t\tconst result = await this.uploadFilePromise(lists[i].url);\r\n\t\t\t\tlet item = this[`fileList${event.name}`][fileListLen];\r\n\t\t\t\tthis[`fileList${event.name}`].splice(\r\n\t\t\t\t\tfileListLen,\r\n\t\t\t\t\t1,\r\n\t\t\t\t\tObject.assign(item, {\r\n\t\t\t\t\t\tstatus: 'success',\r\n\t\t\t\t\t\tmessage: '',\r\n\t\t\t\t\t\turl: result\r\n\t\t\t\t\t})\r\n\t\t\t\t);\r\n\t\t\t\tfileListLen++;\r\n\t\t\t}\r\n\t\t\tthis.upMediaOrImg = false;\r\n\t\t},\r\n\t\t//上传图片\r\n\t\tuploadFilePromise(url) {\r\n\t\t\tthis.upMediaOrImg = true;\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tlet a = uni.uploadFile({\r\n\t\t\t\t\turl: ip + '/app/common/upload',\r\n\t\t\t\t\tfilePath: url,\r\n\t\t\t\t\tname: 'file',\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tresolve(JSON.parse(res.data));\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail() {\r\n\t\t\t\t\t\tthis.upMediaOrImg = false;\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '图片上传失败',\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\t//新增上传视频\r\n\t\tselectVideo() {\r\n\t\t\tuni.chooseMedia({\r\n\t\t\t\tmaxDuration: 60,\r\n\t\t\t\tcount: 1,\r\n\t\t\t\tsourceType: ['album', 'camera'],\r\n\t\t\t\tcompressed: true,\r\n\t\t\t\tmediaType: ['video'],\r\n\t\t\t\tsuccess: r => {\r\n\t\t\t\t\tthis.vtype = 2;\r\n\t\t\t\t\tlet linShi2 = r.tempFiles[0].tempFilePath;\r\n\t\t\t\t\tthis.upMediaOrImg = true;\r\n\t\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\t\turl: ip + '/app/common/upload',\r\n\t\t\t\t\t\tfilePath: linShi2,\r\n\t\t\t\t\t\tname: 'file',\r\n\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\ttoken: uni.getStorageSync('token')\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: uploadFileRes => {\r\n\t\t\t\t\t\t\tlet paths = JSON.parse(uploadFileRes.data);\r\n\t\t\t\t\t\t\tthis.vtype = 3;\r\n\t\t\t\t\t\t\tthis.videoImg = r.tempFiles[0].thumbTempFilePath;\r\n\t\t\t\t\t\t\tthis.mediaVideoList.push(paths.result[0].url);\r\n\t\t\t\t\t\t\tthis.upMediaOrImg = false;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail() {\r\n\t\t\t\t\t\t\tthis.upMediaOrImg = false;\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '视频上传失败',\r\n\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t//删除视频\r\n\t\tremoveVideo() {\r\n\t\t\tthis.vtype = 1;\r\n\t\t\tthis.mediaVideoList = [];\r\n\t\t\tthis.videoImg = '';\r\n\t\t},\r\n\t\t//点击发布 调用接口进行安全验证\r\n\t\tasync sendArticle() {\r\n\t\t\tif (this.value === 1) {\r\n\t\t\t\tif (this.fileList1.length === 0 && !this.content) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '发布不可为空~',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.upMediaOrImg) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请先等待图片上传完成',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.value === 2) {\r\n\t\t\t\tif (this.mediaVideoList === 0 && !this.content2) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '发布不可为空~',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.upMediaOrImg) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请先等待视频上传完成',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '内容发布中'\r\n\t\t\t});\r\n\t\t\tif (this.value === 1) {\r\n\t\t\t\tlet res = await checkContent({ content: !this.content ? '分享图片' : this.content });\r\n\t\t\t\tif (res.code !== 0 || res.result.errcode !== 0) {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '发布的内容包含违规信息，请修改',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.sendReallyArticle();\r\n\t\t\t} else if (this.value === 2) {\r\n\t\t\t\tlet res = await checkContent({ content: !this.content2 ? '分享视频' : this.content2 });\r\n\t\t\t\tif (res.code !== 0 || res.result.errcode !== 0) {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '发布的内容包含违规信息，请修改',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.sendReallyArticle();\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync sendReallyArticle() {\r\n\t\t\tif (this.value === 1) {\r\n\t\t\t\tthis.mediaImgList = this.fileList1.map((item, i, arr) => {\r\n\t\t\t\t\treturn item.url.result[0].url;\r\n\t\t\t\t});\r\n\t\t\t\tlet res;\r\n\t\t\t\tif (this.secret) {\r\n\t\t\t\t\tres = await addXFilePost({ content: this.content, meeting: this.meeting, media: this.mediaImgList });\r\n\t\t\t\t} else {\r\n\t\t\t\t\tres = await addPost({ content: this.content, meeting: this.meeting, media: this.mediaImgList });\r\n\t\t\t\t}\r\n\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t\tif (res.code !== 0) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '发布失败',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet pages = getCurrentPages();\r\n\t\t\t\tlet beforePage = pages[pages.length - 2];\r\n\t\t\t\tbeforePage.$vm.refresh = true;\r\n\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\tsuccess: function() {}\r\n\t\t\t\t});\r\n\t\t\t} else if (this.value === 2) {\r\n\t\t\t\tlet res;\r\n\t\t\t\tif (this.secret) {\r\n\t\t\t\t\tres = await addXFilePost({\r\n\t\t\t\t\t\tcontent: this.content2 ? this.content2 : '',\r\n\t\t\t\t\t\tmeeting: this.meeting,\r\n\t\t\t\t\t\tmedia: this.mediaVideoList\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tres = await addPost({\r\n\t\t\t\t\t\tcontent: this.content2 ? this.content2 : '',\r\n\t\t\t\t\t\tmeeting: this.meeting,\r\n\t\t\t\t\t\tmedia: this.mediaVideoList\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tuni.hideLoading();\r\n\t\t\t\tif (res.code !== 0) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '发布失败',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet pages = getCurrentPages();\r\n\t\t\t\tlet beforePage = pages[pages.length - 2];\r\n\t\t\t\tbeforePage.$vm.refresh = true;\r\n\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\tsuccess: function() {}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tbackTo() {\r\n\t\t\tuni.navigateBack({});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.issue-top {\r\n\tdisplay: flex;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\tpadding: 20rpx;\r\n\tbackground-color: white;\r\n\t.send {\r\n\t\twidth: 120rpx;\r\n\t\theight: 66rpx;\r\n\t\t/deep/.u-button {\r\n\t\t\theight: 66rpx !important;\r\n\t\t}\r\n\t}\r\n}\r\n/deep/.u-textarea {\r\n\tmargin-bottom: 20rpx;\r\n}\r\n.uploads {\r\n\tpadding: 0 20rpx;\r\n}\r\n/deep/.u-upload {\r\n\tflex: 0 !important;\r\n}\r\n/deep/.u-upload__wrap {\r\n\tflex: 0 !important;\r\n\timage {\r\n\t\twidth: 160rpx;\r\n\t\theight: 160rpx;\r\n\t}\r\n}\r\n/deep/.u-radio-group {\r\n\tmargin: 20rpx;\r\n\t.u-radio {\r\n\t\tmargin-right: 50rpx;\r\n\t}\r\n}\r\n/deep/.u-upload__button {\r\n\tflex-direction: row !important;\r\n}\r\n.v-box {\r\n\tposition: relative;\r\n\twidth: 160rpx;\r\n\theight: 160rpx;\r\n\timage {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 160rpx;\r\n\t\theight: 160rpx;\r\n\t}\r\n\tdiv {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tright: 0;\r\n\t\twidth: 34rpx;\r\n\t\theight: 34rpx;\r\n\t}\r\n}\r\n</style>\n","import mod from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--10-oneOf-1-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--10-oneOf-1-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--10-oneOf-1-2!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--10-oneOf-1-3!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\less-loader\\\\dist\\\\cjs.js??ref--10-oneOf-1-4!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--10-oneOf-1-5!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./artcleIssue.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--10-oneOf-1-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--10-oneOf-1-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--10-oneOf-1-2!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--10-oneOf-1-3!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\less-loader\\\\dist\\\\cjs.js??ref--10-oneOf-1-4!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--10-oneOf-1-5!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./artcleIssue.vue?vue&type=style&index=0&lang=less&\"","var render, staticRenderFns, recyclableRender, components\nvar renderjs\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","import mod from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./App.vue?vue&type=script&lang=js&\"","<script>\r\nvar ws = require('@/utils/webSocket.js');\r\n// import { mapGetters, mapMutations, mapState } from 'vuex';\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tglobalData: {\r\n\t\t\t\tws: {} // ws 实例\r\n\t\t\t}\r\n\t\t};\r\n\t},\r\n\t//---------生命周期\r\n\tonLaunch: function() {\r\n\t\t// wx.requestSubscribeMessage({\r\n\t\t// \ttmplIds: ['5w3aU15YTMsEVccUd5OSJlsODGLDa140xw_ch2jhNz0', '5w3aU15YTMsEVccUd5OSJnQury11U_8lNHw5ZWpA7_Y'],\r\n\t\t// \tsuccess(res) {\r\n\t\t// \t\t// if (res['模板ID1'] === 'accept') {\r\n\t\t// \t\t//   // 用户同意订阅模板ID1\r\n\t\t// \t\t// } else if (res['模板ID1'] === 'reject') {\r\n\t\t// \t\t//   // 用户拒绝订阅模板ID1\r\n\t\t// \t\t// }\r\n\t\t// \t\t// 对其他模板ID的订阅结果进行相应处理\r\n\t\t// \t\tconsole.log(res);\r\n\t\t// \t},\r\n\t\t// \tfail(err) {\r\n\t\t// \t\t// 订阅失败的处理\r\n\t\t// \t\tconsole.log(err);\r\n\t\t// \t}\r\n\t\t// });\r\n\t\t// ws.init(); //初始化 ws\r\n\t\t// //监听断开时间，网咯断开，ws 断开都会执行这个回调\r\n\t\t// ws.on('onOpen', () => {\r\n\t\t// \tthis.globalData.ws = ws.ws;\r\n\t\t// });\r\n\t},\r\n\tonLoad: function() {},\r\n\tonShow: function() {\r\n\t\t// 小程序自动更新\r\n\t\tif (wx.canIUse('getUpdateManager')) {\r\n\t\t\tconst updateManager = wx.getUpdateManager();\r\n\t\t\tupdateManager.onCheckForUpdate(function(res) {\r\n\t\t\t\t// 请求完新版本信息的回调\r\n\t\t\t\tif (res.hasUpdate) {\r\n\t\t\t\t\tupdateManager.onUpdateReady(function() {\r\n\t\t\t\t\t\twx.showModal({\r\n\t\t\t\t\t\t\ttitle: '更新提示',\r\n\t\t\t\t\t\t\tcontent: '新版本已经准备好，是否重启应用？',\r\n\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t// 新的版本已经下载好，调用 applyUpdate 应用新版本并重启\r\n\t\t\t\t\t\t\t\t\tupdateManager.applyUpdate();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\tupdateManager.onUpdateFailed(function() {\r\n\t\t\t\t\t\t// 新的版本下载失败\r\n\t\t\t\t\t\twx.showModal({\r\n\t\t\t\t\t\t\ttitle: '已经有新版本了哟~',\r\n\t\t\t\t\t\t\tcontent: '新版本已经上线啦~，请您删除当前小程序，重新搜索打开哟~'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\twx.showModal({\r\n\t\t\t\ttitle: '提示',\r\n\t\t\t\tcontent: '当前微信版本过低，可能无法使用某些功能，请升级到最新微信版本后重试。'\r\n\t\t\t});\r\n\t\t}\r\n\t\t//\r\n\t\tthis.lookAllNetwork();\r\n\t},\r\n\tonHide: function() {},\r\n\tonUnload: function() {},\r\n\tmethods: {\r\n\t\t//监听网络\r\n\t\tlookAllNetwork() {\r\n\t\t\tuni.onNetworkStatusChange(res => {\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t\tif (!res.isConnected) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '网络断开！',\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\tduration: 2000\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// console.log('有网');\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: '网络重启中！'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.updateWs();\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tupdateWs() {\r\n\t\t\tthis.globalData.ws = null;\r\n\t\t\t// ws初始化\r\n\t\t\tws.init();\r\n\t\t\t//监听断开时间，网咯断开，ws 断开都会执行这个回调\r\n\t\t\tws.on('onOpen', () => {\r\n\t\t\t\tthis.globalData.ws = ws.ws;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import '@/uni_modules/uview-ui/index.scss';\r\n/*  #ifdef  H5  */\r\nbody {\r\n\tmax-width: 560px; //最大宽度自己可以调整\r\n\tmargin: auto !important;\r\n}\r\n/*  #endif  */\r\n/*每个页面公共css */\r\npage {\r\n\twidth: 100vm;\r\n\tmin-height: 100%;\r\n\tdisplay: flex;\r\n\tfont-size: 28rpx;\r\n\tbackground-color: #fff;\r\n\tbox-sizing: border-box;\r\n}\r\n.container {\r\n\twidth: 750rpx;\r\n\tpadding: 20rpx;\r\n\tpadding-bottom: 0 !important;\r\n}\r\n.pages {\r\n\twidth: 750rpx;\r\n}\r\n.box {\r\n\twidth: 100%;\r\n}\r\n</style>\n"],"sourceRoot":""}